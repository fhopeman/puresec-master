{% extends "sceleton.html" %}

{% block content %}
    <div class="panel panel-default">
        <div class="panel-heading">
            <i class="glyphicon glyphicon-leaf"> System</i>
            <i id="system_switch" class="button glyphicon glyphicon-off pull-right"
               title="enable/disable the system here" data-enabled="{{system.enabled}}"></i>
        </div>
        <div class="panel-body">
            <table class="table table_system_state">
                <thead>
                    <tr>
                        <th></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            Active
                        </td>
                        <td>
                            <span class="state state_{% if system.enabled %}ok{% else %}error{% endif %}"></span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading">
            <i class="glyphicon glyphicon-eye-open"> Detection Zones</i>
        </div>
        <div class="panel-body">
            <table class="table table_slaves">
                <thead>
                    <tr>
                        <th>Zone</th>
                        <th>Health</th>
                        <th>Alarm State</th>
                    </tr>
                </thead>
                <tbody>
                {% for detector in detectors %}
                    <tr>
                        <td>
                            {{detector.detector_name}}
                        </td>
                        <td>
                            <span class="state state_{% if detector.healthy %}ok{% else %}error{% endif %}"></span>
                        </td>
                        <td>
                            <span class="state state_{% if detector.fired %}error{% else %}ok{% endif %}"></span>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading">
            <i class="glyphicon glyphicon-bell"> Alarm Handlers</i>
        </div>
        <div class="panel-body">
            <table class="table table_handlers">
                <thead>
                    <tr>
                        <th>Handler</th>
                        <th>Health</th>
                    </tr>
                </thead>
                <tbody>
                {% for handler in handlers %}
                    <tr>
                        <td>
                            {{handler.handler_name}}
                        </td>
                        <td>
                            <span class="state state_{% if handler.healthy %}ok{% else %}error{% endif %}"></span>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
